<html>

<head>
  <script src='/resources/constants.js'></script>
  <script src='socket.io/socket.io.js'></script>
  <script src='resources/pixi.js'></script>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

</head>

<body>
  <div id='form'>
<form action="/add-question" method='POST'>

<h1>Add Question</h1>

<label>Prompt</label>
      <input type="text" id="prompt" name="prompt"> <br />

<label>Type</label>
      <input type="radio" id="mcq" name="typeofQuestion" onclick= setMCQ()>MCQ
      <input type="radio" id="short-answer" name ="typeofQuestion" onclick= setShort()>Short Answer
      <br />
      <!-- come back to this later  -->

<div id="mcqSection">
  <label>Choices</label>
       <input type="textarea" id="choice1" class="choices" name="choices" >
       <input type="checkbox" id="choice1Ans" name ="choiceAns" />
       <br />
       <input type="textarea" id="choice2" class="choices" name="choices"disabled='disabled'>
       <input type="checkbox" id="choice2Ans" name ="choiceAns" />
       <br />
       <input type="textarea" id="choice3" class="choices" name="choices"disabled='disabled'>
       <input type="checkbox" id="choice3Ans" name ="choiceAns" />
       <br />
       <input type="textarea" id="choice4" class="choices" name="choices"disabled='disabled'>
       <input type="checkbox" id="choice4Ans" name ="choiceAns" />
       <br />
</div>
<div id="shortSection">
  <label>Solution</label>
  <input type="text" id="shortAns" name="shortAns"/>
</div>



<label>Time</label>
      <select id="time" name="time">
        <option value="5s">5 seconds</option>
        <option value="10s">10 seconds</option>
        <option value="15s">15 seconds</option>
        <option value="20s">20 seconds</option>
      </select>
      <br />

<label>Reward</label>
      <input type="number" id="reward" name="reward"><br />

<label>Penalty</label>
      <input type="number" id="penalty" name="penalty"><br />

		 <input type="reset" id="cancel" value="Cancel">
     <input type="submit" value="Submit" id="submit">

     <script src="controller/add-question.js"></script>

     <script>

     // only 1 checkbox is selected
     $(document).on('click', 'input[type="checkbox"]', function() {
         $('input[type="checkbox"]').not(this).prop('checked', false);
     });


      function setMCQ(){
        $("#mcqSection").show();
        $('#shortSection').hide();
      }

      function setShort(){
        $("#mcqSection").hide();
        $('#shortSection').show();
      }

      // everything in an array
      function displayAnswer() {
        var choice = [];

        choice[0] = $("#choice1").val();
        choice[1] = $("#choice2").val();
        choice[2] = $("#choice3").val();
        choice[3] = $("#choice4").val();

        var choiceArr  = []
        choice.forEach(function(individualChoice){
          if(individualChoice !== ""){
            choiceArr.push(individualChoice);
          }
        });
        var choiceArr = [choice[0] , choice[1], choice[2], choice[3]];

       console.log(choiceArr);
      }

      function displayChoice1() {
        if ($ ('#choice1').val() === "") {
          $("#choice2").empty();
          $("#choice2").prop('disabled', true);
        }else {
          $("#choice2").prop('disabled', false);
        }
      }

      function displayChoice2() {
        if ($ ('#choice2').val() == '') {
          $("#choice3").empty();
          $("#choice3").prop('disabled', true);
        }else {
          $("#choice3").prop('disabled', false);
        }
      }

      function displayChoice3() {
        if ($('#choice3').val() == '') {
          $("#choice4").empty();
          $("#choice4").prop('disabled', true);
        }else {
          $("#choice4").prop('disabled', false);
        }
      }

      function displayChoice(){
        displayChoice1();
        displayChoice2();
        displayChoice3();
      }

      $(".choices").on('keydown', function() {
        displayChoice();
      });


      function defaultSetting(){
        setMCQ();
        $("#mcq").val(C.DB.QUESTION_TYPE.MCQ);
        $("#short-answer").val( C.DB.QUESTION_TYPE.SHORT_ANS);
      }

      defaultSetting();

      // validations
      $('#submit').click(function()
     {
    if( !$('#prompt').val() ) {
       alert('Please fill in the prompt!');
       return false;
    }

    else if($('input[name=typeofQuestion]:checked').length<=0)
    {
     alert("Please pick a type!");
     return false;
    }
    console.log(C);
    console.log($('#mcq').val() == C.DB.QUESTION_TYPE.MCQ);
    if($('#mcq').val() == C.DB.QUESTION_TYPE.MCQ){
      if($('input[name=choiceAns]:checked').length<=0)
      {
         alert("Please pick a check box!");
         return false;
      }

      else if( !$('#choice1').val() ) {
         alert('Please fill in at least 2 choices!');
         return false;
      }

      else if( !$('#choice2').val() ) {
         alert('Please fill in at least 2 choices!');
         return false;
      }
    }


});


     </script>
</body>
</div>
</form>
</html>
